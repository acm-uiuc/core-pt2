{"version":3,"sources":["../../src/services/mailService.js"],"names":["mailService","sendRegEmail","token","signature","process","env","JWT_SECRET","jwt","verify","err","decoded","email","data","link","encodeURI","transporter","nodemailer","createTransport","host","MAIL_HOST","port","secure","auth","user","MAIL_USER","pass","MAIL_PASS","sendMail","from","to","subject","html","info","sendResetEmail"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;AAEA,IAAMA,WAAW,GAAG;AAClBC,EAAAA,YAAY;AAAA,gFAAE,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACNC,cAAAA,SADM,GACMC,OAAO,CAACC,GAAR,CAAYC,UADlB;;AAGZC,uCAAIC,MAAJ,CAAWN,KAAX,EAAkBC,SAAlB,EAA6B,UAAUM,GAAV,EAAeC,OAAf,EAAwB;AACnDC,gBAAAA,KAAK,GAAGD,OAAO,CAACE,IAAR,CAAaD,KAArB;AACD,eAFD;;AAIIE,cAAAA,IAPQ,GAODC,SAAS,CAAC,gCAAgCZ,KAAjC,CAPR;AASRa,cAAAA,WATQ,GASMC,uBAAWC,eAAX,CAA2B;AAC3CC,gBAAAA,IAAI,EAAEd,OAAO,CAACC,GAAR,CAAYc,SADyB;AAE3CC,gBAAAA,IAAI,EAAE,GAFqC;AAG3CC,gBAAAA,MAAM,EAAE,IAHmC;AAI3CC,gBAAAA,IAAI,EAAE;AACJC,kBAAAA,IAAI,EAAEnB,OAAO,CAACC,GAAR,CAAYmB,SADd;AAEJC,kBAAAA,IAAI,EAAErB,OAAO,CAACC,GAAR,CAAYqB;AAFd;AAJqC,eAA3B,CATN;AAAA;AAAA,qBAmBKX,WAAW,CAACY,QAAZ,CAAqB;AACpCC,gBAAAA,IAAI,EAAE,oBAD8B;AAEpCC,gBAAAA,EAAE,EAAElB,KAFgC;AAGpCmB,gBAAAA,OAAO,EAAE,2BAH2B;AAIpCC,gBAAAA,IAAI,EACF,kPACAlB,IADA,GAEA,IAFA,GAGAA,IAHA,GAIA;AATkC,eAArB,CAnBL;;AAAA;AAmBRmB,cAAAA,IAnBQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KADM;AAgClBC,EAAAA,cAAc;AAAA,kFAAE,kBAAO/B,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACRC,cAAAA,SADQ,GACIC,OAAO,CAACC,GAAR,CAAYC,UADhB;;AAGdC,uCAAIC,MAAJ,CAAWN,KAAX,EAAkBC,SAAlB,EAA6B,UAAUM,GAAV,EAAeC,OAAf,EAAwB;AACnDC,gBAAAA,KAAK,GAAGD,OAAO,CAACE,IAAR,CAAaD,KAArB;AACD,eAFD;;AAIIE,cAAAA,IAPU,GAOHC,SAAS,CAAC,+BAA+BZ,KAAhC,CAPN;AASVa,cAAAA,WATU,GASIC,uBAAWC,eAAX,CAA2B;AAC3CC,gBAAAA,IAAI,EAAEd,OAAO,CAACC,GAAR,CAAYc,SADyB;AAE3CC,gBAAAA,IAAI,EAAE,GAFqC;AAG3CC,gBAAAA,MAAM,EAAE,IAHmC;AAI3CC,gBAAAA,IAAI,EAAE;AACJC,kBAAAA,IAAI,EAAEnB,OAAO,CAACC,GAAR,CAAYmB,SADd;AAEJC,kBAAAA,IAAI,EAAErB,OAAO,CAACC,GAAR,CAAYqB;AAFd;AAJqC,eAA3B,CATJ;AAAA;AAAA,qBAmBGX,WAAW,CAACY,QAAZ,CAAqB;AACpCC,gBAAAA,IAAI,EAAE,oBAD8B;AAEpCC,gBAAAA,EAAE,EAAElB,KAFgC;AAGpCmB,gBAAAA,OAAO,EAAE,2BAH2B;AAIpCC,gBAAAA,IAAI,EACF,4NACAlB,IADA,GAEA,IAFA,GAGAA,IAHA,GAIA;AATkC,eAArB,CAnBH;;AAAA;AAmBVmB,cAAAA,IAnBU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAhCI,CAApB;eAiEehC,W","sourcesContent":["import nodemailer from 'nodemailer';\nimport jwt from 'jsonwebtoken';\n\nconst mailService = {\n  sendRegEmail: async (token) => {\n    const signature = process.env.JWT_SECRET;\n    let email;\n    jwt.verify(token, signature, function (err, decoded) {\n      email = decoded.data.email;\n    });\n\n    let link = encodeURI('https://[URL]/verify?token=' + token);\n\n    let transporter = nodemailer.createTransport({\n      host: process.env.MAIL_HOST,\n      port: 465,\n      secure: true,\n      auth: {\n        user: process.env.MAIL_USER,\n        pass: process.env.MAIL_PASS,\n      },\n    });\n\n    let info = await transporter.sendMail({\n      from: '\"[NAME]\" <[EMAIL]>',\n      to: email,\n      subject: 'Verify your [URL] account',\n      html:\n        'Welcome to <a href=\"https://[URL]\">[URL]</a>! Someone (hopefully you!) registered for an account with this email address. If this was you, click the link below to verify your account. Otherwise, please ignore this email. <br /> <a href=\"' +\n        link +\n        '\">' +\n        link +\n        '</a>',\n    });\n  },\n  sendResetEmail: async (token) => {\n    const signature = process.env.JWT_SECRET;\n    let email;\n    jwt.verify(token, signature, function (err, decoded) {\n      email = decoded.data.email;\n    });\n\n    let link = encodeURI('https://[URL]/reset?token=' + token);\n\n    let transporter = nodemailer.createTransport({\n      host: process.env.MAIL_HOST,\n      port: 465,\n      secure: true,\n      auth: {\n        user: process.env.MAIL_USER,\n        pass: process.env.MAIL_PASS,\n      },\n    });\n\n    let info = await transporter.sendMail({\n      from: '\"[NAME]\" <[EMAIL]>',\n      to: email,\n      subject: 'Reset your [URL] password',\n      html:\n        'Someone (hopefully you) has requested to reset your password on <a href=\"https://[URL]\">[URL]</a>. If this was you, click the link below to change your password. Otherwise, please ignore this email. <br /> <a href=\"' +\n        link +\n        '\">' +\n        link +\n        '</a>',\n    });\n  },\n};\n\nexport default mailService;\n"],"file":"mailService.js"}