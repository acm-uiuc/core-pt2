{"version":3,"sources":["../../src/routes/admin.js"],"names":["router","post","req","res","userUsername","body","username","models","User","findByLogin","userRecord","status","send","json","user","email","jwt","authService","generateToken"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEA,IAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,IAAP,CACE,cADF;AAAA;AAEE;AACA;AACA;AAJF;AAAA,qEAKE,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,YAAAA,YADR,GACuBF,GAAG,CAACG,IAAJ,CAASC,QADhC;AAAA;AAAA,mBAG2BC,mBAAOC,IAAP,CAAYC,WAAZ,CAAwBL,YAAxB,CAH3B;;AAAA;AAGQM,YAAAA,UAHR;;AAAA,gBAKOA,UALP;AAAA;AAAA;AAAA;;AAAA,6CAMWP,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,gBAArB,CANX;;AAAA;AAAA,6CASST,GAAG,CAACU,IAAJ,CAAS;AACdC,cAAAA,IAAI,EAAE;AACJC,gBAAAA,KAAK,EAAEL,UAAU,CAACK,KADd;AAEJT,gBAAAA,QAAQ,EAAEI,UAAU,CAACJ;AAFjB,eADQ;AAKdU,cAAAA,GAAG,EAAEC,wBAAYC,aAAZ,CAA0BR,UAA1B;AALS,aAAT,CATT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GALF;;AAAA;AAAA;AAAA;AAAA;eAwBeV,M","sourcesContent":["import { Router } from 'express';\nimport isAuth from '../middlewares/isAuth';\nimport attachUser from '../middlewares/attachUser';\nimport roleCheck from '../middlewares/roleCheck';\nimport authService from '../services/authService';\nimport models from '../models';\n\nconst router = Router();\n\nrouter.post(\n  '/impersonate',\n  // isAuth,\n  // attachUser,\n  // roleCheck(2),\n  async (req, res) => {\n    const userUsername = req.body.username;\n\n    const userRecord = await models.User.findByLogin(userUsername);\n\n    if (!userRecord) {\n      return res.status(404).send('User not found');\n    }\n\n    return res.json({\n      user: {\n        email: userRecord.email,\n        username: userRecord.username,\n      },\n      jwt: authService.generateToken(userRecord),\n    });\n  }\n);\n\nexport default router;\n"],"file":"admin.js"}